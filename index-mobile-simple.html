<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sistema Solar M√≥vil - Challenge 4</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #000;
            overflow: hidden;
            touch-action: none;
        }
        
        #ui {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            z-index: 1000;
            color: white;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #ffd700;
        }
        
        #ui h2 {
            color: #ffd700;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        #ui p {
            font-size: 11px;
            margin: 2px 0;
        }
        
        .planet-info {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            max-width: 90%;
            z-index: 1001;
        }
        
        .planet-info h3 {
            color: #ffd700;
            font-size: 18px;
            margin-bottom: 8px;
        }
        
        .planet-info p {
            font-size: 12px;
            margin: 5px 0;
        }
        
        .close-btn {
            position: absolute;
            top: 5px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }
        
        .controls {
            position: fixed;
            bottom: 10px;
            left: 10px;
            right: 10px;
            z-index: 1000;
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #ffd700;
            color: #000;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 10px;
            min-width: 60px;
            text-align: center;
        }
        
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
            color: #ffd700;
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ffd700;
        }
        
        .spinner {
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top: 3px solid #ffd700;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="ui">
        <h2>ü™ê Sistema Solar</h2>
        <p>Toca los planetas para informaci√≥n</p>
    </div>

    <div class="planet-info" id="planetInfo">
        <button class="close-btn" onclick="closePlanetInfo()">&times;</button>
        <h3 id="planetName"></h3>
        <p id="planetDescription"></p>
        <p><strong>Di√°metro:</strong> <span id="planetDiameter"></span></p>
        <p><strong>Distancia al Sol:</strong> <span id="planetDistance"></span></p>
        <p><strong>Per√≠odo orbital:</strong> <span id="planetPeriod"></span></p>
    </div>

    <div class="controls">
        <button class="control-btn" onclick="resetView()">üîÑ Reset</button>
        <button class="control-btn" onclick="toggleAnimation()">‚èØÔ∏è Pausar</button>
        <button class="control-btn" onclick="focusOnSun()">‚òÄÔ∏è Sol</button>
        <button class="control-btn" onclick="focusOnEarth()">üåç Tierra</button>
    </div>

    <div class="loading" id="loadingIndicator">
        <div class="spinner"></div>
        <h3>Cargando...</h3>
        <p id="loadingStatus">Inicializando...</p>
    </div>

    <!-- A-Frame Scene ultra simplificado -->
    <a-scene 
        id="scene"
        vr-mode-ui="enabled: false"
        embedded
        renderer="antialias: false; precision: lowp"
        background="color: #000011">
        
        <!-- C√°mara optimizada para m√≥vil -->
        <a-camera 
            id="camera"
            position="0 1.6 5" 
            look-controls="enabled: true; touchEnabled: true; pointerLockEnabled: false; magicWindowTrackingEnabled: true"
            wasd-controls="enabled: false"
            cursor="rayOrigin: mouse"
            raycaster="objects: .clickable"
            touch-action="none">
        </a-camera>

        <!-- Iluminaci√≥n m√≠nima -->
        <a-light type="ambient" color="#404040" intensity="0.5"></a-light>
        <a-light type="directional" position="0 10 0" color="#ffffff" intensity="0.5"></a-light>

        <!-- Sistema Solar simplificado -->
        <a-entity id="solarSystem" position="0 0 0">
            
            <!-- Sol -->
            <a-sphere 
                id="sun"
                class="clickable"
                radius="0.5" 
                position="0 0 0"
                material="color: #ffd700; emissive: #ff6600; emissiveIntensity: 0.3"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 20000"
                onclick="showPlanetInfo('sun')">
            </a-sphere>

            <!-- Mercurio -->
            <a-entity id="mercuryOrbit" position="0 0 0">
                <a-sphere 
                    id="mercury"
                    class="clickable"
                    radius="0.08" 
                    position="1.2 0 0"
                    material="color: #8c7853"
                    onclick="showPlanetInfo('mercury')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="10000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- Venus -->
            <a-entity id="venusOrbit" position="0 0 0">
                <a-sphere 
                    id="venus"
                    class="clickable"
                    radius="0.1" 
                    position="1.6 0 0"
                    material="color: #ffc649"
                    onclick="showPlanetInfo('venus')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="15000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- Tierra -->
            <a-entity id="earthOrbit" position="0 0 0">
                <a-sphere 
                    id="earth"
                    class="clickable"
                    radius="0.12" 
                    position="2 0 0"
                    material="color: #6b93d6"
                    onclick="showPlanetInfo('earth')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="20000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- Marte -->
            <a-entity id="marsOrbit" position="0 0 0">
                <a-sphere 
                    id="mars"
                    class="clickable"
                    radius="0.1" 
                    position="2.5 0 0"
                    material="color: #cd5c5c"
                    onclick="showPlanetInfo('mars')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="25000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- J√∫piter -->
            <a-entity id="jupiterOrbit" position="0 0 0">
                <a-sphere 
                    id="jupiter"
                    class="clickable"
                    radius="0.25" 
                    position="3.5 0 0"
                    material="color: #d8ca9d"
                    onclick="showPlanetInfo('jupiter')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="30000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- Saturno -->
            <a-entity id="saturnOrbit" position="0 0 0">
                <a-sphere 
                    id="saturn"
                    class="clickable"
                    radius="0.2" 
                    position="4.5 0 0"
                    material="color: #fad5a5"
                    onclick="showPlanetInfo('saturn')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="35000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- Urano -->
            <a-entity id="uranusOrbit" position="0 0 0">
                <a-sphere 
                    id="uranus"
                    class="clickable"
                    radius="0.15" 
                    position="5.5 0 0"
                    material="color: #4fd0e7"
                    onclick="showPlanetInfo('uranus')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="40000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

            <!-- Neptuno -->
            <a-entity id="neptuneOrbit" position="0 0 0">
                <a-sphere 
                    id="neptune"
                    class="clickable"
                    radius="0.15" 
                    position="6.5 0 0"
                    material="color: #4b70dd"
                    onclick="showPlanetInfo('neptune')">
                </a-sphere>
                <a-animation 
                    attribute="rotation" 
                    to="0 360 0" 
                    dur="45000" 
                    repeat="indefinite">
                </a-animation>
            </a-entity>

        </a-entity>

    </a-scene>

    <!-- A-Frame Script -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    
    <script>
        // Datos de los planetas
        const planetData = {
            sun: {
                name: "Sol",
                description: "Nuestra estrella, una bola gigante de gas caliente que proporciona luz y calor a todo el sistema solar.",
                diameter: "1,392,700 km",
                distance: "Centro del sistema",
                period: "25-35 d√≠as (rotaci√≥n)"
            },
            mercury: {
                name: "Mercurio",
                description: "El planeta m√°s cercano al Sol. Tiene temperaturas extremas y no tiene atm√≥sfera.",
                diameter: "4,879 km",
                distance: "57.9 millones km",
                period: "88 d√≠as terrestres"
            },
            venus: {
                name: "Venus",
                description: "El planeta m√°s caliente del sistema solar debido a su densa atm√≥sfera de di√≥xido de carbono.",
                diameter: "12,104 km",
                distance: "108.2 millones km",
                period: "225 d√≠as terrestres"
            },
            earth: {
                name: "Tierra",
                description: "Nuestro hogar. El √∫nico planeta conocido con vida, agua l√≠quida y una atm√≥sfera rica en ox√≠geno.",
                diameter: "12,756 km",
                distance: "149.6 millones km",
                period: "365.25 d√≠as"
            },
            mars: {
                name: "Marte",
                description: "El planeta rojo. Tiene el volc√°n m√°s grande del sistema solar y evidencia de agua en el pasado.",
                diameter: "6,792 km",
                distance: "227.9 millones km",
                period: "687 d√≠as terrestres"
            },
            jupiter: {
                name: "J√∫piter",
                description: "El planeta m√°s grande. Es un gigante gaseoso con la Gran Mancha Roja, una tormenta gigante.",
                diameter: "142,984 km",
                distance: "778.5 millones km",
                period: "11.9 a√±os terrestres"
            },
            saturn: {
                name: "Saturno",
                description: "Famoso por sus anillos espectaculares. Es menos denso que el agua y flotar√≠a en un oc√©ano gigante.",
                diameter: "120,536 km",
                distance: "1,432 millones km",
                period: "29.5 a√±os terrestres"
            },
            uranus: {
                name: "Urano",
                description: "El planeta que rota de lado. Tiene anillos tenues y una atm√≥sfera de hidr√≥geno y helio.",
                diameter: "51,118 km",
                distance: "2,867 millones km",
                period: "84 a√±os terrestres"
            },
            neptune: {
                name: "Neptuno",
                description: "El planeta m√°s ventoso del sistema solar. Sus vientos pueden alcanzar hasta 2,100 km/h.",
                diameter: "49,528 km",
                distance: "4,515 millones km",
                period: "165 a√±os terrestres"
            }
        };

        // Mostrar informaci√≥n del planeta
        function showPlanetInfo(planetId) {
            const data = planetData[planetId];
            if (!data) return;
            
            document.getElementById('planetName').textContent = data.name;
            document.getElementById('planetDescription').textContent = data.description;
            document.getElementById('planetDiameter').textContent = data.diameter;
            document.getElementById('planetDistance').textContent = data.distance;
            document.getElementById('planetPeriod').textContent = data.period;
            
            document.getElementById('planetInfo').style.display = 'block';
        }

        // Cerrar informaci√≥n del planeta
        function closePlanetInfo() {
            document.getElementById('planetInfo').style.display = 'none';
        }

        // Resetear vista
        function resetView() {
            const camera = document.getElementById('camera');
            camera.setAttribute('position', '0 1.6 5');
            camera.setAttribute('rotation', '0 0 0');
        }

        // Pausar/reanudar animaciones
        let animationsPaused = false;
        function toggleAnimation() {
            const scene = document.getElementById('scene');
            const animations = scene.querySelectorAll('[animation]');
            
            animationsPaused = !animationsPaused;
            
            animations.forEach(anim => {
                if (animationsPaused) {
                    anim.removeAttribute('animation');
                } else {
                    location.reload();
                }
            });
        }

        // Enfocar en el Sol
        function focusOnSun() {
            const camera = document.getElementById('camera');
            camera.setAttribute('position', '0 1 2');
            camera.setAttribute('rotation', '0 0 0');
        }

        // Enfocar en la Tierra
        function focusOnEarth() {
            const camera = document.getElementById('camera');
            camera.setAttribute('position', '2 1 2');
            camera.setAttribute('rotation', '0 0 0');
        }

        // Funci√≥n para actualizar estado de carga
        function updateLoadingStatus(message) {
            const status = document.getElementById('loadingStatus');
            if (status) {
                status.textContent = message;
            }
        }

        // Funci√≥n para ocultar indicador de carga
        function hideLoadingIndicator() {
            const loading = document.getElementById('loadingIndicator');
            if (loading) {
                loading.style.display = 'none';
            }
        }

        // Inicializar cuando A-Frame est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            updateLoadingStatus('Cargando A-Frame...');
            
            // Esperar a que A-Frame est√© listo
            const checkAFrame = setInterval(() => {
                if (typeof AFRAME !== 'undefined') {
                    clearInterval(checkAFrame);
                    
                    updateLoadingStatus('Configurando controles m√≥viles...');
                    
                    // Configurar controles t√°ctiles
                    setupMobileControls();
                    
                    setTimeout(() => {
                        hideLoadingIndicator();
                        console.log('Sistema Solar m√≥vil cargado correctamente');
                    }, 1000);
                }
            }, 100);
        });

        // Configurar controles m√≥viles
        function setupMobileControls() {
            const camera = document.getElementById('camera');
            if (!camera) return;

            // Configurar look-controls para m√≥vil
            camera.setAttribute('look-controls', {
                enabled: true,
                touchEnabled: true,
                pointerLockEnabled: false,
                magicWindowTrackingEnabled: true,
                reverseMouseDrag: false
            });

            // Agregar controles de gestos
            document.addEventListener('touchstart', handleTouchStart);
            document.addEventListener('touchmove', handleTouchMove);
            document.addEventListener('touchend', handleTouchEnd);
        }

        let touchStartX = 0;
        let touchStartY = 0;
        let isDragging = false;

        function handleTouchStart(event) {
            if (event.touches.length === 1) {
                touchStartX = event.touches[0].clientX;
                touchStartY = event.touches[0].clientY;
                isDragging = true;
                event.preventDefault();
            }
        }

        function handleTouchMove(event) {
            if (isDragging && event.touches.length === 1) {
                const deltaX = event.touches[0].clientX - touchStartX;
                const deltaY = event.touches[0].clientY - touchStartY;
                
                // Rotar la c√°mara basado en el movimiento del dedo
                const camera = document.getElementById('camera');
                if (camera) {
                    const currentRotation = camera.getAttribute('rotation') || {x: 0, y: 0, z: 0};
                    const newRotation = {
                        x: currentRotation.x - deltaY * 0.5,
                        y: currentRotation.y - deltaX * 0.5,
                        z: currentRotation.z
                    };
                    camera.setAttribute('rotation', newRotation);
                }
                
                touchStartX = event.touches[0].clientX;
                touchStartY = event.touches[0].clientY;
                event.preventDefault();
            }
        }

        function handleTouchEnd(event) {
            isDragging = false;
        }

        // Cerrar informaci√≥n tocando fuera en m√≥vil
        document.addEventListener('touchstart', function(event) {
            if (event.target === document.body) {
                closePlanetInfo();
            }
        });
    </script>
</body>
</html>
